(()=>{"use strict";const t=document.querySelector(".slider");const e=document.getElementById("state"),n=document.getElementById("city");function o(t){n.textContent=t[0],n.style.textTransform="capitalize",e.textContent=t[1],e.style.textTransform="capitalize"}function c(t,e){const n=document.createElement("div");n.classList.add("hourly-info");const o=document.createElement("p");o.classList.add("hour"),o.textContent=function(t){let e=t.split(/:| /).join("");const n=e.slice(e.length-2);return e=e.length>7?e.slice(0,2):e.slice(0,1),e+n}(t.dt.slice(11));const c=function(t){const e=document.createElement("img");return e.classList.add("weather-icon"),e.src=`https://openweathermap.org/img/wn/${t}@2x.png`,e}(t.weather[0].icon),d=document.createElement("div");d.classList.add("temp-container");const i=document.createElement("p");i.classList.add("hourly-temp"),i.textContent=Math.round(t.main.temp);const a=document.createElement("p");return a.classList.add("hourly-degrees"),a.textContent="metric"===e?"°C":"°F",d.append(i,a),n.append(o,c,d),n}function d(t){let e=0;const n=t[0].dt.slice(0,10);return t.forEach((t=>{n===t.dt.slice(0,10)&&e++})),e}const i=document.getElementById("search"),a=document.querySelector("button");function s(){"0px"===window.getComputedStyle(i).getPropertyValue("width")?(i.setAttribute("style","width: 75%; transition: width .5s ease;"),setTimeout((()=>{a.style.display="block"}),500)):(i.removeAttribute("style","width: 75%;"),i.style.transition="width .5s ease",setTimeout((()=>{a.style.display="none"}),100))}async function l(t,e){let n=t[0],i=t[1];const a=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${n},%20${i}&limit=5&appid=c4404ba7cc6d37e8768e9682ed0c7259`,{mode:"cors"}),s=await a.json();console.log(s),async function(t,e,n){let i=t[0].lat,a=t[0].lon;const s=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${i}&lon=${a}&appid=c4404ba7cc6d37e8768e9682ed0c7259&units=${e}`,{mode:"cors"}),l=await s.json();console.log(l),function(t,e,n){const o=document.getElementById("main-left"),i=t.list[0];document.getElementById("weather-condition").textContent=i.weather[0].description,document.getElementById("temperature").textContent=Math.round(i.main.temp),document.getElementById("low").textContent=e[0],document.getElementById("high").textContent=e[1],o.removeChild(o.lastChild),function(t,e){const n=document.getElementById("main-left"),o=document.createElement("div");o.classList.add("todays-card");const i=document.createElement("div");i.classList.add("hourly-container"),t.slice(0,d(t)).forEach((t=>{i.appendChild(c(t,e))})),o.appendChild(i);const a=document.createElement("div");a.classList.add("scroll-box"),a.appendChild(o),n.appendChild(a)}(t.list,n),function(t,e){!function(t,e){let n=1,o=function(t){let e=1,n=t[0].dt.slice(0,10);return t.forEach((t=>{t.dt.slice(0,10)!==n&&(e++,n=t.dt.slice(0,10))})),e}(t),i=0,a=d(t),s=a;const l=document.getElementById("main-right"),r=document.getElementById("card-wrapper");for(r.textContent="";n<=o;){let o=t.slice(i,s);const l=document.createElement("div");l.classList.add("cards",`day${n}`);const m=document.createElement("p");m.classList.add("card-day"),m.textContent=new Intl.DateTimeFormat("en-us",{weekday:"short"}).format(new Date(o[0].dt.slice(0,10)));const u=document.createElement("div");u.classList.add("hourly-container"),o.forEach((t=>{u.appendChild(c(t,e))})),l.append(m,u),r.appendChild(l),n++,i+=a,i!==t.length&&(a=d(t.slice(i))),s+=a}l.appendChild(r)}(t.slice(d(t)),e)}(t.list,n)}(l,function(t){const e=t.list,n=r(t.list[0].dt).slice(0,10);let o=Math.round(t.list[0].main.temp_min),c=Math.round(t.list[0].main.temp_max);return e.forEach((t=>{let e=r(t.dt).slice(0,10),d=Math.round(t.main.temp_min),i=Math.round(t.main.temp_max);t.dt=r(t.dt),e===n&&(d<=o&&(o=d),i>=c&&(c=i))})),[o,c]}(l),e),o(n)}(s,e,t)}function r(t){const e=new Date(1e3*t).toLocaleDateString(),n=new Date(1e3*t).toLocaleTimeString();let o="";return o=e.length<10?"0"+e:e,o+`, ${n}`}let m="imperial",u=[];const p=["Brooklyn","New York"];window.onload=t=>{l(p,m)},document.querySelector(".switch").addEventListener("click",(e=>{m=function(){getComputedStyle(document.body).getPropertyValue("--switch-rd");const e=document.querySelector(".switch"),n=document.getElementById("degrees"),o=document.getElementById("high-degrees"),c=document.getElementById("low-degrees");return"0px"===window.getComputedStyle(t).getPropertyValue("left")?(t.setAttribute("style","left: 50%; transition: all .5s ease;"),e.setAttribute("style","background: linear-gradient(225deg, #232e40, #1e2736); box-shadow:  -20px 20px 18px #1d2635, 20px -20px 18px #253043; transition: all .5s ease;"),n.textContent="°C",o.textContent="°C",c.textContent="°C","metric"):(t.setAttribute("style","left: 0; transition: all .5s ease;"),e.removeAttribute("style","background: linear-gradient(225deg, #232e40, #1e2736); box-shadow:  -20px 20px 18px #1d2635, 20px -20px 18px #253043;"),e.style.transition="all .5s ease",n.textContent="°F",o.textContent="°F",c.textContent="°F","imperial")}(),u.length>0?l(u,m):l(p,m)}));const h=document.querySelector("form");h.addEventListener("click",(t=>{if("search-icon"===t.target.id)s();else if("right-arrow"===t.target.id){t.preventDefault(),s();const e=document.getElementById("search").value,n=e.indexOf(",");u=" "===e.charAt(n+1)?e.split(", "):e.split(","),void 0===u[1]&&alert("No state or country entered"),l(u,m),h.reset()}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUJoSSxFQUFVYyxNQUFNLE1BQ3ZEZCxFQUFVYyxNQUFNLFVBQ2JxSCxJQUFoQmpCLEVBQVMsSUFBa0JrQixNQUFNLCtCQUNwQy9FLEVBQVU2RCxFQUFVNUcsR0FDcEIsRUFBSytILE9BQ1AsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3NsaWRlci5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9VSS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJcIik7XG5cbmZ1bmN0aW9uIG1vdmVTbGlkZXIoKSB7XG4gICAgY29uc3QgcmFkaXVzID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1zd2l0Y2gtcmRcIik7XG4gICAgY29uc3Qgc3dpdGNoU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2hcIik7XG4gICAgY29uc3QgZGVncmVlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVncmVlc1wiKTtcbiAgICBjb25zdCBoaWdoRGVncmVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoaWdoLWRlZ3JlZXNcIik7XG4gICAgY29uc3QgbG93RGVncmVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3ctZGVncmVlc1wiKTtcbiAgICBpZihjaGVja0RpcmVjdGlvbigpID09PSBcIjBweFwiKSB7XG4gICAgICAgIHNsaWRlci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImxlZnQ6IDUwJTsgdHJhbnNpdGlvbjogYWxsIC41cyBlYXNlO1wiKTtcbiAgICAgICAgc3dpdGNoU2xpZGVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDIyNWRlZywgIzIzMmU0MCwgIzFlMjczNik7IGJveC1zaGFkb3c6ICAtMjBweCAyMHB4IDE4cHggIzFkMjYzNSwgMjBweCAtMjBweCAxOHB4ICMyNTMwNDM7IHRyYW5zaXRpb246IGFsbCAuNXMgZWFzZTtcIik7XG4gICAgICAgIGRlZ3JlZXMudGV4dENvbnRlbnQgPSBcIsKwQ1wiO1xuICAgICAgICBoaWdoRGVncmVlLnRleHRDb250ZW50ID0gXCLCsENcIjtcbiAgICAgICAgbG93RGVncmVlLnRleHRDb250ZW50ID0gXCLCsENcIjtcbiAgICAgICAgcmV0dXJuIFwibWV0cmljXCI7XG4gICAgfWVsc2Uge1xuICAgICAgICBzbGlkZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJsZWZ0OiAwOyB0cmFuc2l0aW9uOiBhbGwgLjVzIGVhc2U7XCIpO1xuICAgICAgICBzd2l0Y2hTbGlkZXIucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjI1ZGVnLCAjMjMyZTQwLCAjMWUyNzM2KTsgYm94LXNoYWRvdzogIC0yMHB4IDIwcHggMThweCAjMWQyNjM1LCAyMHB4IC0yMHB4IDE4cHggIzI1MzA0MztcIik7XG4gICAgICAgIHN3aXRjaFNsaWRlci5zdHlsZS50cmFuc2l0aW9uID0gXCJhbGwgLjVzIGVhc2VcIjtcbiAgICAgICAgZGVncmVlcy50ZXh0Q29udGVudCA9IFwiwrBGXCI7XG4gICAgICAgIGhpZ2hEZWdyZWUudGV4dENvbnRlbnQgPSBcIsKwRlwiO1xuICAgICAgICBsb3dEZWdyZWUudGV4dENvbnRlbnQgPSBcIsKwRlwiO1xuICAgICAgICByZXR1cm4gXCJpbXBlcmlhbFwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tEaXJlY3Rpb24oKSB7XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZXIpO1xuICAgIGNvbnN0IGxlZnQgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwibGVmdFwiKTtcbiAgICByZXR1cm4gbGVmdDtcbn1cblxuZXhwb3J0IHttb3ZlU2xpZGVyfTsiLCJjb25zdCBzdGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdGVcIik7XG5jb25zdCBjaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaXR5XCIpO1xuXG5mdW5jdGlvbiB1cGRhdGVMb2NhdGlvbih1c2VySW5wdXQpIHtcbiAgY2l0eS50ZXh0Q29udGVudCA9IHVzZXJJbnB1dFswXTtcbiAgY2l0eS5zdHlsZS50ZXh0VHJhbnNmb3JtID0gXCJjYXBpdGFsaXplXCI7XG4gIHN0YXRlLnRleHRDb250ZW50ID0gdXNlcklucHV0WzFdO1xuICBzdGF0ZS5zdHlsZS50ZXh0VHJhbnNmb3JtID0gXCJjYXBpdGFsaXplXCI7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVdlYXRoZXJEYXRhKHdlYXRoZXJEYXRhLCBoaUxvQXJyLCB1bml0cykge1xuICBjb25zdCBtYWluTGVmdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbi1sZWZ0XCIpO1xuICBjb25zdCBjdXJyZW50RGF5ID0gd2VhdGhlckRhdGEubGlzdFswXTtcbiAgY29uc3Qgd2VhdGhlckNvbmRpdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VhdGhlci1jb25kaXRpb25cIik7XG4gIHdlYXRoZXJDb25kaXRpb24udGV4dENvbnRlbnQgPSBjdXJyZW50RGF5LndlYXRoZXJbMF0uZGVzY3JpcHRpb247XG4gIGNvbnN0IHRlbXBlcmF0dXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZW1wZXJhdHVyZVwiKTtcbiAgdGVtcGVyYXR1cmUudGV4dENvbnRlbnQgPSBNYXRoLnJvdW5kKGN1cnJlbnREYXkubWFpbi50ZW1wKTtcbiAgY29uc3QgbG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dcIik7XG4gIGxvdy50ZXh0Q29udGVudCA9IGhpTG9BcnJbMF07XG4gIGNvbnN0IGhpZ2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhpZ2hcIik7XG4gIGhpZ2gudGV4dENvbnRlbnQgPSBoaUxvQXJyWzFdO1xuICBtYWluTGVmdC5yZW1vdmVDaGlsZChtYWluTGVmdC5sYXN0Q2hpbGQpO1xuICB1cGRhdGVDdXJyZW50RGF5Q2FyZCh3ZWF0aGVyRGF0YS5saXN0LCB1bml0cyk7XG4gIHVwZGF0ZU5leHREYXlDYXJkcyh3ZWF0aGVyRGF0YS5saXN0LCB1bml0cyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnREYXlDYXJkKHdlYXRoZXJBcnIsIHVuaXRzKSB7XG4gIGNvbnN0IG1haW5MZWZ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluLWxlZnRcIik7XG4gIGNvbnN0IHRvZGF5c0NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0b2RheXNDYXJkLmNsYXNzTGlzdC5hZGQoXCJ0b2RheXMtY2FyZFwiKTtcbiAgY29uc3QgaG91cmx5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgaG91cmx5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJob3VybHktY29udGFpbmVyXCIpO1xuICBjb25zdCB0b2RheXNEYXRhID0gd2VhdGhlckFyci5zbGljZSgwLCBjdXJyZW50RGF0ZUNvdW50ZXIod2VhdGhlckFycikpO1xuICB0b2RheXNEYXRhLmZvckVhY2goZGF5ID0+IHtcbiAgICBob3VybHlDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlSG91cmx5SW5mbyhkYXksIHVuaXRzKSk7XG4gIH0pXG4gIHRvZGF5c0NhcmQuYXBwZW5kQ2hpbGQoaG91cmx5Q29udGFpbmVyKTtcbiAgY29uc3Qgc2Nyb2xsQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgc2Nyb2xsQm94LmNsYXNzTGlzdC5hZGQoXCJzY3JvbGwtYm94XCIpO1xuICBzY3JvbGxCb3guYXBwZW5kQ2hpbGQodG9kYXlzQ2FyZCk7XG4gIG1haW5MZWZ0LmFwcGVuZENoaWxkKHNjcm9sbEJveCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhvdXJseUluZm8oaG91cmx5RGF0YSwgdW5pdHMpIHtcbiAgY29uc3QgaG91cmx5SW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGhvdXJseUluZm8uY2xhc3NMaXN0LmFkZChcImhvdXJseS1pbmZvXCIpO1xuICBjb25zdCBob3VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGhvdXIuY2xhc3NMaXN0LmFkZChcImhvdXJcIik7XG4gIGhvdXIudGV4dENvbnRlbnQgPSBzaW1wbGlmeVRpbWUoaG91cmx5RGF0YS5kdC5zbGljZSgxMSkpO1xuICBjb25zdCB3ZWF0aGVySWNvbiA9IGNyZWF0ZVdlYXRoZXJJY29uKGhvdXJseURhdGEud2VhdGhlclswXS5pY29uKTtcbiAgY29uc3QgdGVtcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRlbXBDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRlbXAtY29udGFpbmVyXCIpO1xuICBjb25zdCBob3VybHlUZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGhvdXJseVRlbXAuY2xhc3NMaXN0LmFkZChcImhvdXJseS10ZW1wXCIpO1xuICBob3VybHlUZW1wLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChob3VybHlEYXRhLm1haW4udGVtcCk7XG4gIGNvbnN0IGRlZ3JlZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZGVncmVlcy5jbGFzc0xpc3QuYWRkKFwiaG91cmx5LWRlZ3JlZXNcIik7XG4gICh1bml0cyA9PT0gXCJtZXRyaWNcIikgPyBkZWdyZWVzLnRleHRDb250ZW50ID0gXCLCsENcIiA6IGRlZ3JlZXMudGV4dENvbnRlbnQgPSBcIsKwRlwiO1xuICB0ZW1wQ29udGFpbmVyLmFwcGVuZChob3VybHlUZW1wLCBkZWdyZWVzKTtcbiAgaG91cmx5SW5mby5hcHBlbmQoaG91ciwgd2VhdGhlckljb24sIHRlbXBDb250YWluZXIpO1xuICByZXR1cm4gaG91cmx5SW5mbztcbn1cblxuZnVuY3Rpb24gdXBkYXRlTmV4dERheUNhcmRzKHdlYXRoZXJBcnIsIHVuaXRzKSB7XG4gIGNvbnN0IG5leHREYXlzQXJyID0gd2VhdGhlckFyci5zbGljZShjdXJyZW50RGF0ZUNvdW50ZXIod2VhdGhlckFycikpO1xuICBjcmVhdGVDYXJkcyhuZXh0RGF5c0FyciwgdW5pdHMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkcyh3ZWF0aGVyQXJyLCB1bml0cykge1xuICBsZXQgY2FyZFN0YXJ0RGF5ID0gMTtcbiAgbGV0IGNhcmRFbmREYXkgPSBjYXJkQ291bnQod2VhdGhlckFycik7XG4gIGxldCBzdGFydEluZGV4ID0gMDtcbiAgbGV0IGVuZEluZGV4ID0gY3VycmVudERhdGVDb3VudGVyKHdlYXRoZXJBcnIpO1xuICBsZXQgZW5kSW5kZXhDb3VudCA9IGVuZEluZGV4O1xuICBjb25zdCBtYWluUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW4tcmlnaHRcIik7XG4gIGNvbnN0IGNhcmRXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXJkLXdyYXBwZXJcIik7XG4gIGNhcmRXcmFwcGVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgd2hpbGUoY2FyZFN0YXJ0RGF5IDw9IGNhcmRFbmREYXkpIHtcbiAgICBsZXQgc2FtZURheUFyciA9IHdlYXRoZXJBcnIuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXhDb3VudCk7XG4gICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNhcmRzLmNsYXNzTGlzdC5hZGQoXCJjYXJkc1wiLCBgZGF5JHtjYXJkU3RhcnREYXl9YCk7XG4gICAgY29uc3QgY2FsZW5kYXJEYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBjYWxlbmRhckRheS5jbGFzc0xpc3QuYWRkKFwiY2FyZC1kYXlcIik7XG4gICAgY2FsZW5kYXJEYXkudGV4dENvbnRlbnQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLXVzXCIsIHt3ZWVrZGF5OiBcInNob3J0XCJ9KS5mb3JtYXQobmV3IERhdGUoc2FtZURheUFyclswXS5kdC5zbGljZSgwLCAxMCkpKTtcbiAgICBjb25zdCBob3VybHlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhvdXJseUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaG91cmx5LWNvbnRhaW5lclwiKTtcbiAgICBzYW1lRGF5QXJyLmZvckVhY2goZGF5ID0+IHtcbiAgICAgIGhvdXJseUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVIb3VybHlJbmZvKGRheSwgdW5pdHMpKTtcbiAgICB9KTtcbiAgICBjYXJkcy5hcHBlbmQoY2FsZW5kYXJEYXksIGhvdXJseUNvbnRhaW5lcik7XG4gICAgY2FyZFdyYXBwZXIuYXBwZW5kQ2hpbGQoY2FyZHMpO1xuICAgIGNhcmRTdGFydERheSsrO1xuICAgIHN0YXJ0SW5kZXggKz0gZW5kSW5kZXg7XG4gICAgaWYoc3RhcnRJbmRleCAhPT0gd2VhdGhlckFyci5sZW5ndGgpIGVuZEluZGV4ID0gY3VycmVudERhdGVDb3VudGVyKHdlYXRoZXJBcnIuc2xpY2Uoc3RhcnRJbmRleCkpO1xuICAgIGVuZEluZGV4Q291bnQgKz0gZW5kSW5kZXg7XG4gIH1cbiAgbWFpblJpZ2h0LmFwcGVuZENoaWxkKGNhcmRXcmFwcGVyKTsgIFxufVxuXG4vL0NvdW50IGhvdyBtYW55IGRheXMgdW50aWwgbmV4dCBkYXkgZGF0YVxuZnVuY3Rpb24gY3VycmVudERhdGVDb3VudGVyKHdlYXRoZXJBcnIpIHtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBjb25zdCB0b2RheXNEYXRlID0gd2VhdGhlckFyclswXS5kdC5zbGljZSgwLCAxMCk7XG4gIHdlYXRoZXJBcnIuZm9yRWFjaCgoZGF0ZSkgPT4ge1xuICAgIGlmICh0b2RheXNEYXRlID09PSBkYXRlLmR0LnNsaWNlKDAsIDEwKSkgY291bnRlcisrO1xuICB9KTtcbiAgcmV0dXJuIGNvdW50ZXI7XG59XG5cbi8vQ291bnQgaG93IG1hbnkgY2FyZCBjb250YWluZXJzIHRvIG1ha2UgYmFzZWQgb24gZGlmZmVyZW50IGRhdGUuXG5mdW5jdGlvbiBjYXJkQ291bnQod2VhdGhlckFycikge1xuICBsZXQgZGF5Q291bnQgPSAxO1xuICBsZXQgZGF0ZSA9IHdlYXRoZXJBcnJbMF0uZHQuc2xpY2UoMCwgMTApO1xuICB3ZWF0aGVyQXJyLmZvckVhY2goZGF5ID0+IHtcbiAgICBpZihkYXkuZHQuc2xpY2UoMCwgMTApICE9PSBkYXRlKSB7XG4gICAgICBkYXlDb3VudCsrO1xuICAgICAgZGF0ZSA9IGRheS5kdC5zbGljZSgwLCAxMCk7XG4gICAgfVxuICB9KVxuICByZXR1cm4gZGF5Q291bnQ7XG59XG5cbmZ1bmN0aW9uIHNpbXBsaWZ5VGltZShzdHIpIHtcbiAgbGV0IHJlc3VsdCA9IHN0ci5zcGxpdCgvOnwgLykuam9pbihcIlwiKTtcbiAgY29uc3QgcGVyaW9kID0gcmVzdWx0LnNsaWNlKHJlc3VsdC5sZW5ndGggLSAyKTtcbiAgKHJlc3VsdC5sZW5ndGggPiA3KSA/IHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCAyKSA6IHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCAxKTtcbiAgcmV0dXJuIHJlc3VsdCArIHBlcmlvZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlV2VhdGhlckljb24oZGVzY3JpcHRpb24pIHtcbiAgY29uc3Qgd2VhdGhlckljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICB3ZWF0aGVySWNvbi5jbGFzc0xpc3QuYWRkKFwid2VhdGhlci1pY29uXCIpO1xuICB3ZWF0aGVySWNvbi5zcmMgPSBgaHR0cHM6Ly9vcGVud2VhdGhlcm1hcC5vcmcvaW1nL3duLyR7ZGVzY3JpcHRpb259QDJ4LnBuZ2A7XG4gIHJldHVybiB3ZWF0aGVySWNvbjtcbn1cblxuZXhwb3J0IHsgdXBkYXRlTG9jYXRpb24sIHVwZGF0ZVdlYXRoZXJEYXRhIH07XG4iLCJpbXBvcnQgeyB1cGRhdGVXZWF0aGVyRGF0YSwgdXBkYXRlTG9jYXRpb24gfSBmcm9tIFwiLi9VSVwiO1xuXG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpO1xuY29uc3QgZW50ZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuXG5mdW5jdGlvbiBhbmltYXRlU2VhcmNoQmFyKCkge1xuICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGlucHV0KTtcbiAgY29uc3Qgd2lkdGggPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwid2lkdGhcIik7XG4gIGlmICh3aWR0aCA9PT0gXCIwcHhcIikge1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwid2lkdGg6IDc1JTsgdHJhbnNpdGlvbjogd2lkdGggLjVzIGVhc2U7XCIpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZW50ZXJCdG4uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9LCA1MDApO1xuICB9IGVsc2Uge1xuICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIsIFwid2lkdGg6IDc1JTtcIik7XG4gICAgaW5wdXQuc3R5bGUudHJhbnNpdGlvbiA9IFwid2lkdGggLjVzIGVhc2VcIjtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGVudGVyQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9LCAxMDApO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaEJhcih1c2VySW5wdXQsIHVuaXRzKSB7XG4gICAgbGV0IGNpdHkgPSB1c2VySW5wdXRbMF07XG4gICAgbGV0IHN0YXRlID0gdXNlcklucHV0WzFdO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2dlby8xLjAvZGlyZWN0P3E9JHtjaXR5fSwlMjAke3N0YXRlfSZsaW1pdD01JmFwcGlkPWM0NDA0YmE3Y2M2ZDM3ZTg3NjhlOTY4MmVkMGM3MjU5YCxcbiAgICAgIHsgbW9kZTogXCJjb3JzXCIgfVxuICAgICk7XG4gICAgY29uc3QgbG9jYXRpb25EYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKGxvY2F0aW9uRGF0YSk7XG4gICAgY29udmVydFRvQ29yZGluYXRlcyhsb2NhdGlvbkRhdGEsIHVuaXRzLCB1c2VySW5wdXQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9Db3JkaW5hdGVzKGRhdGEsIHVuaXRzLCB1c2VySW5wdXQpIHtcbiAgICBsZXQgbGF0ID0gZGF0YVswXS5sYXQ7XG4gICAgbGV0IGxvbiA9IGRhdGFbMF0ubG9uO1xuICAgIGNvbnN0IGNvcmRpbmF0ZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZvcmVjYXN0P2xhdD0ke2xhdH0mbG9uPSR7bG9ufSZhcHBpZD1jNDQwNGJhN2NjNmQzN2U4NzY4ZTk2ODJlZDBjNzI1OSZ1bml0cz0ke3VuaXRzfWAsXG4gICAgICB7IG1vZGU6IFwiY29yc1wiIH1cbiAgICApO1xuICAgIGNvbnN0IGNvcmRpbmF0ZURhdGEgPSBhd2FpdCBjb3JkaW5hdGVSZXNwb25zZS5qc29uKCk7XG4gICAgY29uc29sZS5sb2coY29yZGluYXRlRGF0YSk7XG4gICAgdXBkYXRlV2VhdGhlckRhdGEoY29yZGluYXRlRGF0YSwgZ2V0Q3VycmVudEhpTG8oY29yZGluYXRlRGF0YSksIHVuaXRzKTtcbiAgICB1cGRhdGVMb2NhdGlvbih1c2VySW5wdXQpO1xuICAgIHJldHVybiBjb3JkaW5hdGVEYXRhO1xufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50SGlMbyh3ZWF0aGVyRGF0YSkge1xuICBjb25zdCB3ZWF0aGVyQXJyID0gd2VhdGhlckRhdGEubGlzdDtcbiAgY29uc3QgdG9kYXlzRGF0ZSA9IGNvbnZlcnRVbml4VG9VVEMod2VhdGhlckRhdGEubGlzdFswXS5kdCkuc2xpY2UoMCwgMTApO1xuICBsZXQgbG93ID0gTWF0aC5yb3VuZCh3ZWF0aGVyRGF0YS5saXN0WzBdLm1haW4udGVtcF9taW4pO1xuICBsZXQgaGlnaCA9IE1hdGgucm91bmQod2VhdGhlckRhdGEubGlzdFswXS5tYWluLnRlbXBfbWF4KTtcbiAgd2VhdGhlckFyci5mb3JFYWNoKChkYXkpID0+IHtcbiAgICBsZXQgaWZUb2RheXNEYXRlID0gY29udmVydFVuaXhUb1VUQyhkYXkuZHQpLnNsaWNlKDAsIDEwKTtcbiAgICBsZXQgbWluVGVtcCA9IE1hdGgucm91bmQoZGF5Lm1haW4udGVtcF9taW4pO1xuICAgIGxldCBtYXhUZW1wID0gTWF0aC5yb3VuZChkYXkubWFpbi50ZW1wX21heCk7XG4gICAgZGF5LmR0ID0gY29udmVydFVuaXhUb1VUQyhkYXkuZHQpO1xuICAgIGlmIChpZlRvZGF5c0RhdGUgPT09IHRvZGF5c0RhdGUpIHtcbiAgICAgIGlmKG1pblRlbXAgPD0gbG93KSBsb3cgPSBtaW5UZW1wO1xuICAgICAgaWYobWF4VGVtcCA+PSBoaWdoKSBoaWdoID0gbWF4VGVtcDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gW2xvdywgaGlnaF07XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRVbml4VG9VVEModW5peFRpbWUpIHtcbiAgY29uc3QgY29udmVydGVkRGF0ZSA9IG5ldyBEYXRlKHVuaXhUaW1lICogMTAwMCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gIGNvbnN0IGNvbnZlcnRlZFRpbWUgPSBuZXcgRGF0ZSh1bml4VGltZSAqIDEwMDApLnRvTG9jYWxlVGltZVN0cmluZygpO1xuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgKGNvbnZlcnRlZERhdGUubGVuZ3RoIDwgMTApID8gcmVzdWx0ID0gKFwiMFwiICsgY29udmVydGVkRGF0ZSkgOiByZXN1bHQgPSBjb252ZXJ0ZWREYXRlO1xuICByZXR1cm4gcmVzdWx0ICs9IGAsICR7Y29udmVydGVkVGltZX1gO1xufVxuXG5leHBvcnQgeyBhbmltYXRlU2VhcmNoQmFyLCBzZWFyY2hCYXIgfTtcbiIsImltcG9ydCB7IG1vdmVTbGlkZXIgfSBmcm9tIFwiLi9zbGlkZXJcIjtcbmltcG9ydCB7IGFuaW1hdGVTZWFyY2hCYXIsIHNlYXJjaEJhciB9IGZyb20gXCIuL3NlYXJjaFwiO1xuaW1wb3J0IHsgdXBkYXRlTG9jYXRpb24gfSBmcm9tIFwiLi9VSVwiO1xuXG5sZXQgdW5pdHMgPSBcImltcGVyaWFsXCI7XG5sZXQgaW5wdXRBcnIgPSBbXTtcbmNvbnN0IG9uTG9hZElucHV0ID0gW1wiQnJvb2tseW5cIiwgXCJOZXcgWW9ya1wiXTtcblxud2luZG93Lm9ubG9hZCA9IChlKSA9PiB7XG4gIHNlYXJjaEJhcihvbkxvYWRJbnB1dCwgdW5pdHMpO1xufVxuXG5jb25zdCBzbGlkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2hcIik7XG5zbGlkZXJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICB1bml0cyA9IG1vdmVTbGlkZXIoKTtcbiAgaWYoaW5wdXRBcnIubGVuZ3RoID4gMCkgc2VhcmNoQmFyKGlucHV0QXJyLCB1bml0cyk7XG4gIGVsc2Ugc2VhcmNoQmFyKG9uTG9hZElucHV0LCB1bml0cylcbn0pO1xuXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICBpZiAoZS50YXJnZXQuaWQgPT09IFwic2VhcmNoLWljb25cIikgYW5pbWF0ZVNlYXJjaEJhcigpO1xuICBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gXCJyaWdodC1hcnJvd1wiKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGFuaW1hdGVTZWFyY2hCYXIoKTtcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaFwiKS52YWx1ZTtcbiAgICBjb25zdCBmaW5kQ29tbWEgPSB1c2VySW5wdXQuaW5kZXhPZihcIixcIik7XG4gICAgaWYodXNlcklucHV0LmNoYXJBdChmaW5kQ29tbWEgKyAxKSA9PT0gXCIgXCIpIGlucHV0QXJyID0gdXNlcklucHV0LnNwbGl0KFwiLCBcIik7XG4gICAgZWxzZSBpbnB1dEFyciA9IHVzZXJJbnB1dC5zcGxpdChcIixcIik7XG4gICAgaWYoaW5wdXRBcnJbMV0gPT09IHVuZGVmaW5lZCkgYWxlcnQoXCJObyBzdGF0ZSBvciBjb3VudHJ5IGVudGVyZWRcIik7XG4gICAgc2VhcmNoQmFyKGlucHV0QXJyLCB1bml0cyk7XG4gICAgZm9ybS5yZXNldCgpO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6WyJzbGlkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdGF0ZSIsImdldEVsZW1lbnRCeUlkIiwiY2l0eSIsInVwZGF0ZUxvY2F0aW9uIiwidXNlcklucHV0IiwidGV4dENvbnRlbnQiLCJzdHlsZSIsInRleHRUcmFuc2Zvcm0iLCJjcmVhdGVIb3VybHlJbmZvIiwiaG91cmx5RGF0YSIsInVuaXRzIiwiaG91cmx5SW5mbyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJob3VyIiwic3RyIiwicmVzdWx0Iiwic3BsaXQiLCJqb2luIiwicGVyaW9kIiwic2xpY2UiLCJsZW5ndGgiLCJzaW1wbGlmeVRpbWUiLCJkdCIsIndlYXRoZXJJY29uIiwiZGVzY3JpcHRpb24iLCJzcmMiLCJjcmVhdGVXZWF0aGVySWNvbiIsIndlYXRoZXIiLCJpY29uIiwidGVtcENvbnRhaW5lciIsImhvdXJseVRlbXAiLCJNYXRoIiwicm91bmQiLCJtYWluIiwidGVtcCIsImRlZ3JlZXMiLCJhcHBlbmQiLCJjdXJyZW50RGF0ZUNvdW50ZXIiLCJ3ZWF0aGVyQXJyIiwiY291bnRlciIsInRvZGF5c0RhdGUiLCJmb3JFYWNoIiwiZGF0ZSIsImlucHV0IiwiZW50ZXJCdG4iLCJhbmltYXRlU2VhcmNoQmFyIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJzZXRUaW1lb3V0IiwiZGlzcGxheSIsInJlbW92ZUF0dHJpYnV0ZSIsInRyYW5zaXRpb24iLCJhc3luYyIsInNlYXJjaEJhciIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwibG9jYXRpb25EYXRhIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwibGF0IiwibG9uIiwiY29yZGluYXRlUmVzcG9uc2UiLCJjb3JkaW5hdGVEYXRhIiwid2VhdGhlckRhdGEiLCJoaUxvQXJyIiwibWFpbkxlZnQiLCJjdXJyZW50RGF5IiwibGlzdCIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwidG9kYXlzQ2FyZCIsImhvdXJseUNvbnRhaW5lciIsImRheSIsImFwcGVuZENoaWxkIiwic2Nyb2xsQm94IiwidXBkYXRlQ3VycmVudERheUNhcmQiLCJjYXJkU3RhcnREYXkiLCJjYXJkRW5kRGF5IiwiZGF5Q291bnQiLCJjYXJkQ291bnQiLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJlbmRJbmRleENvdW50IiwibWFpblJpZ2h0IiwiY2FyZFdyYXBwZXIiLCJzYW1lRGF5QXJyIiwiY2FyZHMiLCJjYWxlbmRhckRheSIsIkludGwiLCJEYXRlVGltZUZvcm1hdCIsIndlZWtkYXkiLCJmb3JtYXQiLCJEYXRlIiwiY3JlYXRlQ2FyZHMiLCJ1cGRhdGVOZXh0RGF5Q2FyZHMiLCJ1cGRhdGVXZWF0aGVyRGF0YSIsImNvbnZlcnRVbml4VG9VVEMiLCJsb3ciLCJ0ZW1wX21pbiIsImhpZ2giLCJ0ZW1wX21heCIsImlmVG9kYXlzRGF0ZSIsIm1pblRlbXAiLCJtYXhUZW1wIiwiZ2V0Q3VycmVudEhpTG8iLCJjb252ZXJ0VG9Db3JkaW5hdGVzIiwidW5peFRpbWUiLCJjb252ZXJ0ZWREYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiY29udmVydGVkVGltZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImlucHV0QXJyIiwib25Mb2FkSW5wdXQiLCJvbmxvYWQiLCJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJzd2l0Y2hTbGlkZXIiLCJoaWdoRGVncmVlIiwibG93RGVncmVlIiwibW92ZVNsaWRlciIsInRhcmdldCIsImlkIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImZpbmRDb21tYSIsImluZGV4T2YiLCJjaGFyQXQiLCJ1bmRlZmluZWQiLCJhbGVydCIsInJlc2V0Il0sInNvdXJjZVJvb3QiOiIifQ==