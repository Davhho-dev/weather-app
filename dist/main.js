(()=>{"use strict";const t=document.querySelector(".slider");const e=document.getElementById("state"),n=document.getElementById("city");function o(t){n.textContent=t[0],n.style.textTransform="capitalize",e.textContent=t[1],e.style.textTransform="capitalize"}function c(t,e){const n=document.createElement("div");n.classList.add("hourly-info");const o=document.createElement("p");o.classList.add("hour"),o.textContent=function(t){let e=t.split(/:| /).join("");const n=e.slice(e.length-2);return e=e.length>7?e.slice(0,2):e.slice(0,1),e+n}(t.dt.slice(11));const c=function(t){const e=document.createElement("img");return e.classList.add("weather-icon"),e.src=`https://openweathermap.org/img/wn/${t}@2x.png`,e}(t.weather[0].icon),i=document.createElement("div");i.classList.add("temp-container");const d=document.createElement("p");d.classList.add("hourly-temp"),d.textContent=Math.round(t.main.temp);const a=document.createElement("p");return a.classList.add("hourly-degrees"),a.textContent="metric"===e?"°C":"°F",i.append(d,a),n.append(o,c,i),n}function i(t){let e=0;const n=t[0].dt.slice(0,10);return t.forEach((t=>{n===t.dt.slice(0,10)&&e++})),e}const d=document.getElementById("search"),a=document.querySelector("button");function s(){"0px"===window.getComputedStyle(d).getPropertyValue("width")?(d.setAttribute("style","width: 75%; transition: width .5s ease;"),setTimeout((()=>{a.style.display="block"}),500)):(d.removeAttribute("style","width: 75%;"),d.style.transition="width .5s ease",setTimeout((()=>{a.style.display="none"}),100))}async function l(t,e){let n=t[0],d=t[1];console.log(t);const a=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${n},%20${d}&limit=1&appid=c4404ba7cc6d37e8768e9682ed0c7259`,{mode:"cors"});!async function(t,e,n){let d=t[0].lat,a=t[0].lon;const s=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${d}&lon=${a}&appid=c4404ba7cc6d37e8768e9682ed0c7259&units=${e}`,{mode:"cors"}),l=await s.json();console.log(l),function(t,e,n){const o=document.getElementById("main-left"),d=t.list[0];document.getElementById("weather-condition").textContent=d.weather[0].description,document.getElementById("temperature").textContent=Math.round(d.main.temp),document.getElementById("low").textContent=e[0],document.getElementById("high").textContent=e[1],o.removeChild(o.lastChild),function(t,e){const n=document.getElementById("main-left"),o=document.createElement("div");o.classList.add("todays-card");const d=document.createElement("div");d.classList.add("hourly-container"),t.slice(0,i(t)).forEach((t=>{d.appendChild(c(t,e))})),o.appendChild(d);const a=document.createElement("div");a.classList.add("scroll-box"),a.appendChild(o),n.appendChild(a)}(t.list,n),function(t,e){!function(t,e){let n=1,o=function(t){let e=1,n=t[0].dt.slice(0,10);return t.forEach((t=>{t.dt.slice(0,10)!==n&&(e++,n=t.dt.slice(0,10))})),e}(t),d=0,a=i(t),s=a;const l=document.getElementById("main-right"),r=document.getElementById("card-wrapper");for(r.textContent="";n<=o;){let o=t.slice(d,s);const l=document.createElement("div");l.classList.add("cards",`day${n}`);const m=document.createElement("p");m.classList.add("card-day"),m.textContent=new Intl.DateTimeFormat("en-us",{weekday:"short"}).format(new Date(o[0].dt.slice(0,10)));const u=document.createElement("div");u.classList.add("hourly-container"),o.forEach((t=>{u.appendChild(c(t,e))})),l.append(m,u),r.appendChild(l),n++,d+=a,d!==t.length&&(a=i(t.slice(d))),s+=a}l.appendChild(r)}(t.slice(i(t)),e)}(t.list,n)}(l,function(t){const e=t.list,n=r(t.list[0].dt).slice(0,10);let o=Math.round(t.list[0].main.temp_min),c=Math.round(t.list[0].main.temp_max);return e.forEach((t=>{let e=r(t.dt).slice(0,10),i=Math.round(t.main.temp_min),d=Math.round(t.main.temp_max);t.dt=r(t.dt),e===n&&(i<=o&&(o=i),d>=c&&(c=d))})),[o,c]}(l),e),o(n)}(await a.json(),e,t)}function r(t){const e=new Date(1e3*t).toLocaleDateString(),n=new Date(1e3*t).toLocaleTimeString();let o="";return o=e.length<10?"0"+e:e,o+`, ${n}`}let m="imperial",u=[];const p=["Brooklyn","New York"];window.onload=t=>{l(p,m)},document.querySelector(".switch").addEventListener("click",(e=>{m=function(){getComputedStyle(document.body).getPropertyValue("--switch-rd");const e=document.querySelector(".switch"),n=document.getElementById("degrees"),o=document.getElementById("high-degrees"),c=document.getElementById("low-degrees");return"0px"===window.getComputedStyle(t).getPropertyValue("left")?(t.setAttribute("style","left: 50%; transition: all .5s ease;"),e.setAttribute("style","background: linear-gradient(225deg, #232e40, #1e2736); box-shadow:  -20px 20px 18px #1d2635, 20px -20px 18px #253043; transition: all .5s ease;"),n.textContent="°C",o.textContent="°C",c.textContent="°C","metric"):(t.setAttribute("style","left: 0; transition: all .5s ease;"),e.removeAttribute("style","background: linear-gradient(225deg, #232e40, #1e2736); box-shadow:  -20px 20px 18px #1d2635, 20px -20px 18px #253043;"),e.style.transition="all .5s ease",n.textContent="°F",o.textContent="°F",c.textContent="°F","imperial")}(),u.length>0?l(u,m):l(p,m)}));const h=document.querySelector("form");h.addEventListener("click",(t=>{if("search-icon"===t.target.id)s();else if("right-arrow"===t.target.id){t.preventDefault(),s();const e=document.getElementById("search").value;u=e.indexOf(",")>=0?e.split(", "):e.split(","),l(u,m),h.reset()}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxFQUFVM0csR0FDcEIsRUFBSzBILE9BQ1AsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3NsaWRlci5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9VSS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJcIik7XG5cbmZ1bmN0aW9uIG1vdmVTbGlkZXIoKSB7XG4gICAgY29uc3QgcmFkaXVzID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1zd2l0Y2gtcmRcIik7XG4gICAgY29uc3Qgc3dpdGNoU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2hcIik7XG4gICAgY29uc3QgZGVncmVlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVncmVlc1wiKTtcbiAgICBjb25zdCBoaWdoRGVncmVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoaWdoLWRlZ3JlZXNcIik7XG4gICAgY29uc3QgbG93RGVncmVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3ctZGVncmVlc1wiKTtcbiAgICBpZihjaGVja0RpcmVjdGlvbigpID09PSBcIjBweFwiKSB7XG4gICAgICAgIHNsaWRlci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImxlZnQ6IDUwJTsgdHJhbnNpdGlvbjogYWxsIC41cyBlYXNlO1wiKTtcbiAgICAgICAgc3dpdGNoU2xpZGVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDIyNWRlZywgIzIzMmU0MCwgIzFlMjczNik7IGJveC1zaGFkb3c6ICAtMjBweCAyMHB4IDE4cHggIzFkMjYzNSwgMjBweCAtMjBweCAxOHB4ICMyNTMwNDM7IHRyYW5zaXRpb246IGFsbCAuNXMgZWFzZTtcIik7XG4gICAgICAgIGRlZ3JlZXMudGV4dENvbnRlbnQgPSBcIsKwQ1wiO1xuICAgICAgICBoaWdoRGVncmVlLnRleHRDb250ZW50ID0gXCLCsENcIjtcbiAgICAgICAgbG93RGVncmVlLnRleHRDb250ZW50ID0gXCLCsENcIjtcbiAgICAgICAgcmV0dXJuIFwibWV0cmljXCI7XG4gICAgfWVsc2Uge1xuICAgICAgICBzbGlkZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJsZWZ0OiAwOyB0cmFuc2l0aW9uOiBhbGwgLjVzIGVhc2U7XCIpO1xuICAgICAgICBzd2l0Y2hTbGlkZXIucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjI1ZGVnLCAjMjMyZTQwLCAjMWUyNzM2KTsgYm94LXNoYWRvdzogIC0yMHB4IDIwcHggMThweCAjMWQyNjM1LCAyMHB4IC0yMHB4IDE4cHggIzI1MzA0MztcIik7XG4gICAgICAgIHN3aXRjaFNsaWRlci5zdHlsZS50cmFuc2l0aW9uID0gXCJhbGwgLjVzIGVhc2VcIjtcbiAgICAgICAgZGVncmVlcy50ZXh0Q29udGVudCA9IFwiwrBGXCI7XG4gICAgICAgIGhpZ2hEZWdyZWUudGV4dENvbnRlbnQgPSBcIsKwRlwiO1xuICAgICAgICBsb3dEZWdyZWUudGV4dENvbnRlbnQgPSBcIsKwRlwiO1xuICAgICAgICByZXR1cm4gXCJpbXBlcmlhbFwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tEaXJlY3Rpb24oKSB7XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZXIpO1xuICAgIGNvbnN0IGxlZnQgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwibGVmdFwiKTtcbiAgICByZXR1cm4gbGVmdDtcbn1cblxuZXhwb3J0IHttb3ZlU2xpZGVyfTsiLCJjb25zdCBzdGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdGVcIik7XG5jb25zdCBjaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaXR5XCIpO1xuXG5mdW5jdGlvbiB1cGRhdGVMb2NhdGlvbih1c2VySW5wdXQpIHtcbiAgY2l0eS50ZXh0Q29udGVudCA9IHVzZXJJbnB1dFswXTtcbiAgY2l0eS5zdHlsZS50ZXh0VHJhbnNmb3JtID0gXCJjYXBpdGFsaXplXCI7XG4gIHN0YXRlLnRleHRDb250ZW50ID0gdXNlcklucHV0WzFdO1xuICBzdGF0ZS5zdHlsZS50ZXh0VHJhbnNmb3JtID0gXCJjYXBpdGFsaXplXCI7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVdlYXRoZXJEYXRhKHdlYXRoZXJEYXRhLCBoaUxvQXJyLCB1bml0cykge1xuICBjb25zdCBtYWluTGVmdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbi1sZWZ0XCIpO1xuICBjb25zdCBjdXJyZW50RGF5ID0gd2VhdGhlckRhdGEubGlzdFswXTtcbiAgY29uc3Qgd2VhdGhlckNvbmRpdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VhdGhlci1jb25kaXRpb25cIik7XG4gIHdlYXRoZXJDb25kaXRpb24udGV4dENvbnRlbnQgPSBjdXJyZW50RGF5LndlYXRoZXJbMF0uZGVzY3JpcHRpb247XG4gIGNvbnN0IHRlbXBlcmF0dXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZW1wZXJhdHVyZVwiKTtcbiAgdGVtcGVyYXR1cmUudGV4dENvbnRlbnQgPSBNYXRoLnJvdW5kKGN1cnJlbnREYXkubWFpbi50ZW1wKTtcbiAgY29uc3QgbG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dcIik7XG4gIGxvdy50ZXh0Q29udGVudCA9IGhpTG9BcnJbMF07XG4gIGNvbnN0IGhpZ2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhpZ2hcIik7XG4gIGhpZ2gudGV4dENvbnRlbnQgPSBoaUxvQXJyWzFdO1xuICBtYWluTGVmdC5yZW1vdmVDaGlsZChtYWluTGVmdC5sYXN0Q2hpbGQpO1xuICB1cGRhdGVDdXJyZW50RGF5Q2FyZCh3ZWF0aGVyRGF0YS5saXN0LCB1bml0cyk7XG4gIHVwZGF0ZU5leHREYXlDYXJkcyh3ZWF0aGVyRGF0YS5saXN0LCB1bml0cyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnREYXlDYXJkKHdlYXRoZXJBcnIsIHVuaXRzKSB7XG4gIGNvbnN0IG1haW5MZWZ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluLWxlZnRcIik7XG4gIGNvbnN0IHRvZGF5c0NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0b2RheXNDYXJkLmNsYXNzTGlzdC5hZGQoXCJ0b2RheXMtY2FyZFwiKTtcbiAgY29uc3QgaG91cmx5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgaG91cmx5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJob3VybHktY29udGFpbmVyXCIpO1xuICBjb25zdCB0b2RheXNEYXRhID0gd2VhdGhlckFyci5zbGljZSgwLCBjdXJyZW50RGF0ZUNvdW50ZXIod2VhdGhlckFycikpO1xuICB0b2RheXNEYXRhLmZvckVhY2goZGF5ID0+IHtcbiAgICBob3VybHlDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlSG91cmx5SW5mbyhkYXksIHVuaXRzKSk7XG4gIH0pXG4gIHRvZGF5c0NhcmQuYXBwZW5kQ2hpbGQoaG91cmx5Q29udGFpbmVyKTtcbiAgY29uc3Qgc2Nyb2xsQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgc2Nyb2xsQm94LmNsYXNzTGlzdC5hZGQoXCJzY3JvbGwtYm94XCIpO1xuICBzY3JvbGxCb3guYXBwZW5kQ2hpbGQodG9kYXlzQ2FyZCk7XG4gIG1haW5MZWZ0LmFwcGVuZENoaWxkKHNjcm9sbEJveCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhvdXJseUluZm8oaG91cmx5RGF0YSwgdW5pdHMpIHtcbiAgY29uc3QgaG91cmx5SW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGhvdXJseUluZm8uY2xhc3NMaXN0LmFkZChcImhvdXJseS1pbmZvXCIpO1xuICBjb25zdCBob3VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGhvdXIuY2xhc3NMaXN0LmFkZChcImhvdXJcIik7XG4gIGhvdXIudGV4dENvbnRlbnQgPSBzaW1wbGlmeVRpbWUoaG91cmx5RGF0YS5kdC5zbGljZSgxMSkpO1xuICBjb25zdCB3ZWF0aGVySWNvbiA9IGNyZWF0ZVdlYXRoZXJJY29uKGhvdXJseURhdGEud2VhdGhlclswXS5pY29uKTtcbiAgY29uc3QgdGVtcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRlbXBDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRlbXAtY29udGFpbmVyXCIpO1xuICBjb25zdCBob3VybHlUZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGhvdXJseVRlbXAuY2xhc3NMaXN0LmFkZChcImhvdXJseS10ZW1wXCIpO1xuICBob3VybHlUZW1wLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChob3VybHlEYXRhLm1haW4udGVtcCk7XG4gIGNvbnN0IGRlZ3JlZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZGVncmVlcy5jbGFzc0xpc3QuYWRkKFwiaG91cmx5LWRlZ3JlZXNcIik7XG4gICh1bml0cyA9PT0gXCJtZXRyaWNcIikgPyBkZWdyZWVzLnRleHRDb250ZW50ID0gXCLCsENcIiA6IGRlZ3JlZXMudGV4dENvbnRlbnQgPSBcIsKwRlwiO1xuICB0ZW1wQ29udGFpbmVyLmFwcGVuZChob3VybHlUZW1wLCBkZWdyZWVzKTtcbiAgaG91cmx5SW5mby5hcHBlbmQoaG91ciwgd2VhdGhlckljb24sIHRlbXBDb250YWluZXIpO1xuICByZXR1cm4gaG91cmx5SW5mbztcbn1cblxuZnVuY3Rpb24gdXBkYXRlTmV4dERheUNhcmRzKHdlYXRoZXJBcnIsIHVuaXRzKSB7XG4gIGNvbnN0IG5leHREYXlzQXJyID0gd2VhdGhlckFyci5zbGljZShjdXJyZW50RGF0ZUNvdW50ZXIod2VhdGhlckFycikpO1xuICBjcmVhdGVDYXJkcyhuZXh0RGF5c0FyciwgdW5pdHMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkcyh3ZWF0aGVyQXJyLCB1bml0cykge1xuICBsZXQgY2FyZFN0YXJ0RGF5ID0gMTtcbiAgbGV0IGNhcmRFbmREYXkgPSBjYXJkQ291bnQod2VhdGhlckFycik7XG4gIGxldCBzdGFydEluZGV4ID0gMDtcbiAgbGV0IGVuZEluZGV4ID0gY3VycmVudERhdGVDb3VudGVyKHdlYXRoZXJBcnIpO1xuICBsZXQgZW5kSW5kZXhDb3VudCA9IGVuZEluZGV4O1xuICBjb25zdCBtYWluUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW4tcmlnaHRcIik7XG4gIGNvbnN0IGNhcmRXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXJkLXdyYXBwZXJcIik7XG4gIGNhcmRXcmFwcGVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgd2hpbGUoY2FyZFN0YXJ0RGF5IDw9IGNhcmRFbmREYXkpIHtcbiAgICBsZXQgc2FtZURheUFyciA9IHdlYXRoZXJBcnIuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXhDb3VudCk7XG4gICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNhcmRzLmNsYXNzTGlzdC5hZGQoXCJjYXJkc1wiLCBgZGF5JHtjYXJkU3RhcnREYXl9YCk7XG4gICAgY29uc3QgY2FsZW5kYXJEYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBjYWxlbmRhckRheS5jbGFzc0xpc3QuYWRkKFwiY2FyZC1kYXlcIik7XG4gICAgY2FsZW5kYXJEYXkudGV4dENvbnRlbnQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLXVzXCIsIHt3ZWVrZGF5OiBcInNob3J0XCJ9KS5mb3JtYXQobmV3IERhdGUoc2FtZURheUFyclswXS5kdC5zbGljZSgwLCAxMCkpKTtcbiAgICBjb25zdCBob3VybHlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhvdXJseUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaG91cmx5LWNvbnRhaW5lclwiKTtcbiAgICBzYW1lRGF5QXJyLmZvckVhY2goZGF5ID0+IHtcbiAgICAgIGhvdXJseUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVIb3VybHlJbmZvKGRheSwgdW5pdHMpKTtcbiAgICB9KTtcbiAgICBjYXJkcy5hcHBlbmQoY2FsZW5kYXJEYXksIGhvdXJseUNvbnRhaW5lcik7XG4gICAgY2FyZFdyYXBwZXIuYXBwZW5kQ2hpbGQoY2FyZHMpO1xuICAgIGNhcmRTdGFydERheSsrO1xuICAgIHN0YXJ0SW5kZXggKz0gZW5kSW5kZXg7XG4gICAgaWYoc3RhcnRJbmRleCAhPT0gd2VhdGhlckFyci5sZW5ndGgpIGVuZEluZGV4ID0gY3VycmVudERhdGVDb3VudGVyKHdlYXRoZXJBcnIuc2xpY2Uoc3RhcnRJbmRleCkpO1xuICAgIGVuZEluZGV4Q291bnQgKz0gZW5kSW5kZXg7XG4gIH1cbiAgbWFpblJpZ2h0LmFwcGVuZENoaWxkKGNhcmRXcmFwcGVyKTsgIFxufVxuXG4vL0NvdW50IGhvdyBtYW55IGRheXMgdW50aWwgbmV4dCBkYXkgZGF0YVxuZnVuY3Rpb24gY3VycmVudERhdGVDb3VudGVyKHdlYXRoZXJBcnIpIHtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBjb25zdCB0b2RheXNEYXRlID0gd2VhdGhlckFyclswXS5kdC5zbGljZSgwLCAxMCk7XG4gIHdlYXRoZXJBcnIuZm9yRWFjaCgoZGF0ZSkgPT4ge1xuICAgIGlmICh0b2RheXNEYXRlID09PSBkYXRlLmR0LnNsaWNlKDAsIDEwKSkgY291bnRlcisrO1xuICB9KTtcbiAgcmV0dXJuIGNvdW50ZXI7XG59XG5cbi8vQ291bnQgaG93IG1hbnkgY2FyZCBjb250YWluZXJzIHRvIG1ha2UgYmFzZWQgb24gZGlmZmVyZW50IGRhdGUuXG5mdW5jdGlvbiBjYXJkQ291bnQod2VhdGhlckFycikge1xuICBsZXQgZGF5Q291bnQgPSAxO1xuICBsZXQgZGF0ZSA9IHdlYXRoZXJBcnJbMF0uZHQuc2xpY2UoMCwgMTApO1xuICB3ZWF0aGVyQXJyLmZvckVhY2goZGF5ID0+IHtcbiAgICBpZihkYXkuZHQuc2xpY2UoMCwgMTApICE9PSBkYXRlKSB7XG4gICAgICBkYXlDb3VudCsrO1xuICAgICAgZGF0ZSA9IGRheS5kdC5zbGljZSgwLCAxMCk7XG4gICAgfVxuICB9KVxuICByZXR1cm4gZGF5Q291bnQ7XG59XG5cbmZ1bmN0aW9uIHNpbXBsaWZ5VGltZShzdHIpIHtcbiAgbGV0IHJlc3VsdCA9IHN0ci5zcGxpdCgvOnwgLykuam9pbihcIlwiKTtcbiAgY29uc3QgcGVyaW9kID0gcmVzdWx0LnNsaWNlKHJlc3VsdC5sZW5ndGggLSAyKTtcbiAgKHJlc3VsdC5sZW5ndGggPiA3KSA/IHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCAyKSA6IHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCAxKTtcbiAgcmV0dXJuIHJlc3VsdCArIHBlcmlvZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlV2VhdGhlckljb24oZGVzY3JpcHRpb24pIHtcbiAgY29uc3Qgd2VhdGhlckljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICB3ZWF0aGVySWNvbi5jbGFzc0xpc3QuYWRkKFwid2VhdGhlci1pY29uXCIpO1xuICB3ZWF0aGVySWNvbi5zcmMgPSBgaHR0cHM6Ly9vcGVud2VhdGhlcm1hcC5vcmcvaW1nL3duLyR7ZGVzY3JpcHRpb259QDJ4LnBuZ2A7XG4gIHJldHVybiB3ZWF0aGVySWNvbjtcbn1cblxuZXhwb3J0IHsgdXBkYXRlTG9jYXRpb24sIHVwZGF0ZVdlYXRoZXJEYXRhIH07XG4iLCJpbXBvcnQgeyB1cGRhdGVXZWF0aGVyRGF0YSwgdXBkYXRlTG9jYXRpb24gfSBmcm9tIFwiLi9VSVwiO1xuXG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpO1xuY29uc3QgZW50ZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuXG5mdW5jdGlvbiBhbmltYXRlU2VhcmNoQmFyKCkge1xuICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGlucHV0KTtcbiAgY29uc3Qgd2lkdGggPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwid2lkdGhcIik7XG4gIGlmICh3aWR0aCA9PT0gXCIwcHhcIikge1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwid2lkdGg6IDc1JTsgdHJhbnNpdGlvbjogd2lkdGggLjVzIGVhc2U7XCIpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZW50ZXJCdG4uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9LCA1MDApO1xuICB9IGVsc2Uge1xuICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIsIFwid2lkdGg6IDc1JTtcIik7XG4gICAgaW5wdXQuc3R5bGUudHJhbnNpdGlvbiA9IFwid2lkdGggLjVzIGVhc2VcIjtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGVudGVyQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9LCAxMDApO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaEJhcih1c2VySW5wdXQsIHVuaXRzKSB7XG4gIGxldCBjaXR5ID0gdXNlcklucHV0WzBdO1xuICBsZXQgc3RhdGUgPSB1c2VySW5wdXRbMV07XG4gIGNvbnNvbGUubG9nKHVzZXJJbnB1dCk7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9nZW8vMS4wL2RpcmVjdD9xPSR7Y2l0eX0sJTIwJHtzdGF0ZX0mbGltaXQ9MSZhcHBpZD1jNDQwNGJhN2NjNmQzN2U4NzY4ZTk2ODJlZDBjNzI1OWAsXG4gICAgeyBtb2RlOiBcImNvcnNcIiB9XG4gICk7XG4gIGNvbnN0IGxvY2F0aW9uRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgY29udmVydFRvQ29yZGluYXRlcyhsb2NhdGlvbkRhdGEsIHVuaXRzLCB1c2VySW5wdXQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9Db3JkaW5hdGVzKGRhdGEsIHVuaXRzLCB1c2VySW5wdXQpIHtcbiAgbGV0IGxhdCA9IGRhdGFbMF0ubGF0O1xuICBsZXQgbG9uID0gZGF0YVswXS5sb247XG4gIGNvbnN0IGNvcmRpbmF0ZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9sYXQ9JHtsYXR9Jmxvbj0ke2xvbn0mYXBwaWQ9YzQ0MDRiYTdjYzZkMzdlODc2OGU5NjgyZWQwYzcyNTkmdW5pdHM9JHt1bml0c31gLFxuICAgIHsgbW9kZTogXCJjb3JzXCIgfVxuICApO1xuICBjb25zdCBjb3JkaW5hdGVEYXRhID0gYXdhaXQgY29yZGluYXRlUmVzcG9uc2UuanNvbigpO1xuICBjb25zb2xlLmxvZyhjb3JkaW5hdGVEYXRhKTtcbiAgdXBkYXRlV2VhdGhlckRhdGEoY29yZGluYXRlRGF0YSwgZ2V0Q3VycmVudEhpTG8oY29yZGluYXRlRGF0YSksIHVuaXRzKTtcbiAgdXBkYXRlTG9jYXRpb24odXNlcklucHV0KTtcbiAgcmV0dXJuIGNvcmRpbmF0ZURhdGE7XG59XG5cbmZ1bmN0aW9uIGdldEN1cnJlbnRIaUxvKHdlYXRoZXJEYXRhKSB7XG4gIGNvbnN0IHdlYXRoZXJBcnIgPSB3ZWF0aGVyRGF0YS5saXN0O1xuICBjb25zdCB0b2RheXNEYXRlID0gY29udmVydFVuaXhUb1VUQyh3ZWF0aGVyRGF0YS5saXN0WzBdLmR0KS5zbGljZSgwLCAxMCk7XG4gIGxldCBsb3cgPSBNYXRoLnJvdW5kKHdlYXRoZXJEYXRhLmxpc3RbMF0ubWFpbi50ZW1wX21pbik7XG4gIGxldCBoaWdoID0gTWF0aC5yb3VuZCh3ZWF0aGVyRGF0YS5saXN0WzBdLm1haW4udGVtcF9tYXgpO1xuICB3ZWF0aGVyQXJyLmZvckVhY2goKGRheSkgPT4ge1xuICAgIGxldCBpZlRvZGF5c0RhdGUgPSBjb252ZXJ0VW5peFRvVVRDKGRheS5kdCkuc2xpY2UoMCwgMTApO1xuICAgIGxldCBtaW5UZW1wID0gTWF0aC5yb3VuZChkYXkubWFpbi50ZW1wX21pbik7XG4gICAgbGV0IG1heFRlbXAgPSBNYXRoLnJvdW5kKGRheS5tYWluLnRlbXBfbWF4KTtcbiAgICBkYXkuZHQgPSBjb252ZXJ0VW5peFRvVVRDKGRheS5kdCk7XG4gICAgaWYgKGlmVG9kYXlzRGF0ZSA9PT0gdG9kYXlzRGF0ZSkge1xuICAgICAgaWYobWluVGVtcCA8PSBsb3cpIGxvdyA9IG1pblRlbXA7XG4gICAgICBpZihtYXhUZW1wID49IGhpZ2gpIGhpZ2ggPSBtYXhUZW1wO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBbbG93LCBoaWdoXTtcbn1cblxuZnVuY3Rpb24gY29udmVydFVuaXhUb1VUQyh1bml4VGltZSkge1xuICBjb25zdCBjb252ZXJ0ZWREYXRlID0gbmV3IERhdGUodW5peFRpbWUgKiAxMDAwKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgY29uc3QgY29udmVydGVkVGltZSA9IG5ldyBEYXRlKHVuaXhUaW1lICogMTAwMCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICAoY29udmVydGVkRGF0ZS5sZW5ndGggPCAxMCkgPyByZXN1bHQgPSAoXCIwXCIgKyBjb252ZXJ0ZWREYXRlKSA6IHJlc3VsdCA9IGNvbnZlcnRlZERhdGU7XG4gIHJldHVybiByZXN1bHQgKz0gYCwgJHtjb252ZXJ0ZWRUaW1lfWA7XG59XG5cbmV4cG9ydCB7IGFuaW1hdGVTZWFyY2hCYXIsIHNlYXJjaEJhciB9O1xuIiwiaW1wb3J0IHsgbW92ZVNsaWRlciB9IGZyb20gXCIuL3NsaWRlclwiO1xuaW1wb3J0IHsgYW5pbWF0ZVNlYXJjaEJhciwgc2VhcmNoQmFyIH0gZnJvbSBcIi4vc2VhcmNoXCI7XG5pbXBvcnQgeyB1cGRhdGVMb2NhdGlvbiB9IGZyb20gXCIuL1VJXCI7XG5cbmxldCB1bml0cyA9IFwiaW1wZXJpYWxcIjtcbmxldCBpbnB1dEFyciA9IFtdO1xuY29uc3Qgb25Mb2FkSW5wdXQgPSBbXCJCcm9va2x5blwiLCBcIk5ldyBZb3JrXCJdO1xuXG5cbndpbmRvdy5vbmxvYWQgPSAoZSkgPT4ge1xuICBzZWFyY2hCYXIob25Mb2FkSW5wdXQsIHVuaXRzKTtcbn1cblxuY29uc3Qgc2xpZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpdGNoXCIpO1xuc2xpZGVycy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgdW5pdHMgPSBtb3ZlU2xpZGVyKCk7XG4gIGlmKGlucHV0QXJyLmxlbmd0aCA+IDApIHNlYXJjaEJhcihpbnB1dEFyciwgdW5pdHMpO1xuICBlbHNlIHNlYXJjaEJhcihvbkxvYWRJbnB1dCwgdW5pdHMpXG59KTtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgaWYgKGUudGFyZ2V0LmlkID09PSBcInNlYXJjaC1pY29uXCIpIGFuaW1hdGVTZWFyY2hCYXIoKTtcbiAgZWxzZSBpZiAoZS50YXJnZXQuaWQgPT09IFwicmlnaHQtYXJyb3dcIikge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBhbmltYXRlU2VhcmNoQmFyKCk7XG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikudmFsdWU7XG4gICAgaWYgKHVzZXJJbnB1dC5pbmRleE9mKFwiLFwiKSA+PSAwKVxuICAgICAgaW5wdXRBcnIgPSB1c2VySW5wdXQuc3BsaXQoXCIsIFwiKTsgLy9jaGVjayBmb3Igd2hpdGVzcGFjZVxuICAgIGVsc2UgaW5wdXRBcnIgPSB1c2VySW5wdXQuc3BsaXQoXCIsXCIpO1xuICAgIHNlYXJjaEJhcihpbnB1dEFyciwgdW5pdHMpO1xuICAgIGZvcm0ucmVzZXQoKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOlsic2xpZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3RhdGUiLCJnZXRFbGVtZW50QnlJZCIsImNpdHkiLCJ1cGRhdGVMb2NhdGlvbiIsInVzZXJJbnB1dCIsInRleHRDb250ZW50Iiwic3R5bGUiLCJ0ZXh0VHJhbnNmb3JtIiwiY3JlYXRlSG91cmx5SW5mbyIsImhvdXJseURhdGEiLCJ1bml0cyIsImhvdXJseUluZm8iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaG91ciIsInN0ciIsInJlc3VsdCIsInNwbGl0Iiwiam9pbiIsInBlcmlvZCIsInNsaWNlIiwibGVuZ3RoIiwic2ltcGxpZnlUaW1lIiwiZHQiLCJ3ZWF0aGVySWNvbiIsImRlc2NyaXB0aW9uIiwic3JjIiwiY3JlYXRlV2VhdGhlckljb24iLCJ3ZWF0aGVyIiwiaWNvbiIsInRlbXBDb250YWluZXIiLCJob3VybHlUZW1wIiwiTWF0aCIsInJvdW5kIiwibWFpbiIsInRlbXAiLCJkZWdyZWVzIiwiYXBwZW5kIiwiY3VycmVudERhdGVDb3VudGVyIiwid2VhdGhlckFyciIsImNvdW50ZXIiLCJ0b2RheXNEYXRlIiwiZm9yRWFjaCIsImRhdGUiLCJpbnB1dCIsImVudGVyQnRuIiwiYW5pbWF0ZVNlYXJjaEJhciIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwic2V0QXR0cmlidXRlIiwic2V0VGltZW91dCIsImRpc3BsYXkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0cmFuc2l0aW9uIiwiYXN5bmMiLCJzZWFyY2hCYXIiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1vZGUiLCJkYXRhIiwibGF0IiwibG9uIiwiY29yZGluYXRlUmVzcG9uc2UiLCJjb3JkaW5hdGVEYXRhIiwianNvbiIsIndlYXRoZXJEYXRhIiwiaGlMb0FyciIsIm1haW5MZWZ0IiwiY3VycmVudERheSIsImxpc3QiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsInRvZGF5c0NhcmQiLCJob3VybHlDb250YWluZXIiLCJkYXkiLCJhcHBlbmRDaGlsZCIsInNjcm9sbEJveCIsInVwZGF0ZUN1cnJlbnREYXlDYXJkIiwiY2FyZFN0YXJ0RGF5IiwiY2FyZEVuZERheSIsImRheUNvdW50IiwiY2FyZENvdW50Iiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwiZW5kSW5kZXhDb3VudCIsIm1haW5SaWdodCIsImNhcmRXcmFwcGVyIiwic2FtZURheUFyciIsImNhcmRzIiwiY2FsZW5kYXJEYXkiLCJJbnRsIiwiRGF0ZVRpbWVGb3JtYXQiLCJ3ZWVrZGF5IiwiZm9ybWF0IiwiRGF0ZSIsImNyZWF0ZUNhcmRzIiwidXBkYXRlTmV4dERheUNhcmRzIiwidXBkYXRlV2VhdGhlckRhdGEiLCJjb252ZXJ0VW5peFRvVVRDIiwibG93IiwidGVtcF9taW4iLCJoaWdoIiwidGVtcF9tYXgiLCJpZlRvZGF5c0RhdGUiLCJtaW5UZW1wIiwibWF4VGVtcCIsImdldEN1cnJlbnRIaUxvIiwiY29udmVydFRvQ29yZGluYXRlcyIsInVuaXhUaW1lIiwiY29udmVydGVkRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImNvbnZlcnRlZFRpbWUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJpbnB1dEFyciIsIm9uTG9hZElucHV0Iiwib25sb2FkIiwiZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5Iiwic3dpdGNoU2xpZGVyIiwiaGlnaERlZ3JlZSIsImxvd0RlZ3JlZSIsIm1vdmVTbGlkZXIiLCJ0YXJnZXQiLCJpZCIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJpbmRleE9mIiwicmVzZXQiXSwic291cmNlUm9vdCI6IiJ9